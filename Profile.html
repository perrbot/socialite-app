<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Socialite - Elevate your vibe with luxury profile curation and trendsetting style. ðŸ’Žâœ¨ #SocialiteGlowUp" />
  <title>Socialite - Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* Navbar CSS */
    .navbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(237, 100, 166, 0.2);
      z-index: 1000;
      box-shadow: 0 2px 20px rgba(76, 81, 191, 0.1);
    }

    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(237, 100, 166, 0.7); }
      70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(237, 100, 166, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(237, 100, 166, 0); }
    }

    @keyframes glow {
      0% { background: linear-gradient(45deg, #ED64A6, #4C51BF); box-shadow: 0 0 5px #ED64A6, 0 0 10px #ED64A6, 0 0 15px #ED64A6; }
      50% { background: linear-gradient(45deg, #4C51BF, #ED64A6); box-shadow: 0 0 10px #4C51BF, 0 0 20px #4C51BF, 0 0 30px #4C51BF; }
      100% { background: linear-gradient(45deg, #ED64A6, #4C51BF); box-shadow: 0 0 5px #ED64A6, 0 0 10px #ED64A6, 0 0 15px #ED64A6; }
    }

    .adaptive-active { animation: pulse 2s infinite; }
    .adaptive-active i { animation: glow 2s infinite; }

    .unread-badge {
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      color: white;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.7rem;
      font-weight: bold;
      position: absolute;
      top: -5px;
      right: -5px;
      min-width: 18px;
      text-align: center;
    }

    .navbar-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      height: 60px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .navbar-brand {
      font-size: 1.5rem;
      font-weight: 700;
      color: #4C51BF;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .navbar-brand i { color: #ED64A6; }

    .navbar-menu {
      display: flex;
      gap: 30px;
      flex-direction: column;
      height: 100%;
      justify-content: space-between;
    }

    .navbar-bottom-section {
      margin-top: auto;
      padding-top: 20px;
      border-top: 1px solid rgba(237, 100, 166, 0.2);
    }

    .navbar-link {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #4C51BF;
      text-decoration: none;
      font-weight: 500;
      padding: 8px 12px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .navbar-link:hover {
      background: rgba(237, 100, 166, 0.1);
      color: #ED64A6;
    }

    .live-stream-btn {
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      color: white !important;
      border-radius: 25px;
      padding: 12px 20px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(237, 100, 166, 0.3);
      animation: pulse 2s infinite;
    }

    .live-stream-btn:hover {
      background: linear-gradient(45deg, #4C51BF, #ED64A6);
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(237, 100, 166, 0.4);
      animation: none;
    }

    .live-stream-btn i { animation: glow 2s infinite; }

    .navbar-actions {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .navbar-create-btn {
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .navbar-create-btn:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 15px rgba(237, 100, 166, 0.4);
    }

    .navbar-user {
      position: relative;
    }

    .navbar-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid #ED64A6;
      transition: all 0.3s ease;
    }

    .navbar-avatar:hover { transform: scale(1.1); }

    .navbar-dropdown {
      position: absolute;
      top: 50px;
      right: 0;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      min-width: 200px;
      overflow: hidden;
      z-index: 1001;
      display: none;
    }

    .navbar-user:hover .navbar-dropdown { display: block; }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      color: #4C51BF;
      text-decoration: none;
      border: none;
      background: none;
      width: 100%;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dropdown-item:hover {
      background: rgba(237, 100, 166, 0.1);
      color: #ED64A6;
    }

    .navbar-mobile-toggle {
      display: none;
      background: none;
      border: none;
      color: #4C51BF;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .navbar-mobile-menu {
      display: none;
      position: absolute;
      top: 60px;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      z-index: 1001;
    }

    .mobile-menu-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px 20px;
      color: #4C51BF;
      text-decoration: none;
      border: none;
      background: none;
      width: 100%;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .mobile-menu-item:hover {
      background: rgba(237, 100, 166, 0.1);
      color: #ED64A6;
    }

    .mobile-menu-bottom-section {
      border-top: 1px solid rgba(237, 100, 166, 0.2);
      padding-top: 10px;
      margin-top: 10px;
    }

    @media (max-width: 768px) {
      .navbar-menu { display: none; }
      .navbar-mobile-toggle { display: block; }
      .navbar-mobile-menu.active { display: block; }
      .navbar-actions { gap: 10px; }
      .navbar-create-btn { width: 35px; height: 35px; font-size: 1rem; }
      .navbar-avatar { width: 35px; height: 35px; }
    }

    body.dark-mode .navbar {
      background: rgba(45, 55, 72, 0.95);
      border-bottom: 1px solid rgba(159, 122, 234, 0.2);
    }

    body.dark-mode .navbar-brand,
    body.dark-mode .navbar-link,
    body.dark-mode .dropdown-item,
    body.dark-mode .mobile-menu-item {
      color: #E2E8F0;
    }

    body.dark-mode .navbar-dropdown,
    body.dark-mode .navbar-mobile-menu {
      background: #2D3748;
      border: 1px solid #4A5568;
    }

    body.dark-mode .dropdown-item:hover,
    body.dark-mode .mobile-menu-item:hover {
      background: rgba(159, 122, 234, 0.1);
      color: #9F7AEA;
    }

    html, body {
      height: 100%;
      min-height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #4C51BF, #ED64A6, #9F7AEA);
      overflow-x: hidden;
      overflow-y: auto;
    }
    body {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100vw;
      padding-top: 80px; /* Adjust for fixed navbar */
    }
    .profile-header-bg {
      width: 100vw;
      height: 220px;
      background: linear-gradient(135deg, #4C51BF 60%, #ED64A6 100%);
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
    }
    .profile-container {
      position: relative;
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      background: rgba(255,255,255,0.08);
      border-radius: 24px;
      box-shadow: 0 8px 32px rgba(76,81,191,0.13);
      margin-top: 120px;
      padding-bottom: 32px;
      z-index: 1;
      overflow: visible;
    }
    .profile-avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      border: 5px solid #fff;
      background: #eee;
      object-fit: cover;
      position: absolute;
      left: 50%;
      top: -60px;
      transform: translateX(-50%);
      box-shadow: 0 4px 24px rgba(76,81,191,0.18);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: #4C51BF;
      background-image: linear-gradient(135deg, #ED64A6 60%, #4C51BF 100%);
      overflow: hidden;
    }
    .profile-avatar img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      display: block;
    }
    .upload-label {
      position: absolute;
      left: 50%;
      top: 70px;
      transform: translateX(-50%);
      background: rgba(237,100,166,0.85);
      color: #fff;
      padding: 4px 14px;
      border-radius: 16px;
      font-size: 0.95rem;
      cursor: pointer;
      z-index: 2;
      box-shadow: 0 2px 8px rgba(76,81,191,0.08);
      transition: background 0.2s;
      display: none;
    }
    .upload-label:hover {
      background: #4C51BF;
    }
    .profile-container:hover .upload-label,
    .profile-avatar:hover + .upload-label {
      display: block;
    }
    .upload-input {
      display: none;
    }
    .profile-info {
      margin-top: 80px;
      text-align: center;
      color: #fff;
    }
    .profile-username {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 0.2rem;
      color: #fff;
      word-break: break-all;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    .profile-fullname {
      color: #f7e8f4;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }
    .profile-bio {
      color: #fff;
      font-size: 1.05rem;
      margin-bottom: 1.2rem;
      padding: 0 18px;
      word-break: break-word;
    }
    .profile-stats {
      display: flex;
      justify-content: center;
      gap: 2.5rem;
      margin: 1.2rem 0 1.5rem 0;
    }
    .profile-stat {
      text-align: center;
    }
    .profile-stat-number {
      font-size: 1.1rem;
      font-weight: 700;
      color: #fff;
    }
    .profile-stat-label {
      font-size: 0.95rem;
      color: #f7e8f4;
      opacity: 0.85;
    }
    .profile-actions {
      display: flex;
      justify-content: center;
      gap: 1.2rem;
      margin-bottom: 1.5rem;
      flex-wrap: wrap;
    }
    .follow-btn, .unfollow-btn, .edit-btn, .logout-btn, .hide-post-btn, .edit-status-btn {
      padding: 0.7rem 1.2rem;
      border-radius: 22px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 0;
      box-shadow: 0 2px 8px rgba(76,81,191,0.08);
    }
    .follow-btn {
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      color: #fff;
    }
    .follow-btn:hover { background: linear-gradient(45deg, #4C51BF, #ED64A6); }
    .unfollow-btn {
      background: #fff;
      color: #ED64A6;
      border: 2px solid #ED64A6;
      display: none;
    }
    .unfollow-btn.show {
      display: inline-block;
    }
    #unfollowBtn3 {
      display: none;
    }
    .unfollow-btn:hover { background: #ED64A6; color: #fff; }
    .edit-btn {
      background: #fff;
      color: #4C51BF;
      border: 2px solid #4C51BF;
    }
    .edit-btn:hover { background: #4C51BF; color: #fff; }
    #editBtn {
      display: none;
    }
    #editBtn2 {
      display: none;
    }
    .logout-btn {
      background: #fff;
      color: #ED64A6;
      border: 2px solid #ED64A6;
      margin-top: 1.5rem;
      width: 80%;
      margin-left: 10%;
      margin-right: 10%;
      display: none;
    }
    .hidden-logout-btn {
      display: none;
    }
    .logout-btn:hover { background: #ED64A6; color: #fff; }
    .hide-post-btn {
      background: #fff;
      color: #4C51BF;
      border: 1px solid #4C51BF;
      border-radius: 8px;
      padding: 4px 12px;
      font-size: 0.95rem;
      cursor: pointer;
      margin-bottom: 8px;
      transition: background 0.2s;
      display: none;
    }
    #hidePostBtn {
      display: none;
    }
    .hide-post-btn.active {
      background: #ED64A6;
      color: #fff;
      border-color: #ED64A6;
    }
    .edit-status-btn {
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      color: #fff;
      border: none;
    }
    .edit-status-btn:hover { background: linear-gradient(45deg, #4C51BF, #ED64A6); }
    .edit-profile-form, .status-form {
      background: rgba(255,255,255,0.95);
      border-radius: 18px;
      box-shadow: 0 2px 12px rgba(76,81,191,0.13);
      padding: 18px 16px;
      margin: 18px 0;
      display: none;
      position: relative;
      z-index: 10;
    }
    .edit-profile-form input, .edit-profile-form textarea,
    .status-form textarea {
      width: 100%;
      margin-bottom: 12px;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ED64A6;
      font-size: 1rem;
      font-family: inherit;
    }
    .edit-profile-form label, .status-form label {
      font-size: 1rem;
      color: #4C51BF;
      font-weight: 600;
      margin-bottom: 4px;
      display: block;
    }
    .edit-profile-form .form-actions,
    .status-form .form-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }
    .edit-profile-form button,
    .status-form button {
      padding: 0.5rem 1.5rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      color: #fff;
      transition: background 0.2s;
    }
    .edit-profile-form .cancel-btn,
    .status-form .cancel-btn {
      background: #fff;
      color: #ED64A6;
      border: 1px solid #ED64A6;
    }
    .edit-profile-form .cancel-btn:hover,
    .status-form .cancel-btn:hover {
      background: #ED64A6;
      color: #fff;
    }
    .profile-tabs {
      display: flex;
      justify-content: center;
      gap: 2.5rem;
      margin: 2rem 0 1rem 0;
    }
    .profile-tab {
      color: #fff;
      font-size: 1.3rem;
      opacity: 0.7;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      padding-bottom: 6px;
      transition: all 0.2s;
    }
    .profile-tab.active {
      opacity: 1;
      border-bottom: 2.5px solid #ED64A6;
      color: #ED64A6;
    }
    .profile-posts-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 7px;
      padding: 0 10px;
    }
    .profile-post-thumb {
      width: 100%;
      aspect-ratio: 1/1;
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      background-size: cover;
      background-position: center;
      box-shadow: 0 2px 8px rgba(76,81,191,0.08);
      transition: transform 0.15s;
    }
    .profile-post-thumb:hover {
      transform: scale(1.04);
      box-shadow: 0 4px 18px rgba(237,100,166,0.18);
    }
    .loading { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #FFF; font-size: 2rem; display: none; animation: blink 1s infinite; }
    @media (max-width: 600px) {
      .profile-container { max-width: 99vw; }
      .profile-header-bg { height: 160px; }
      .profile-avatar { width: 90px; height: 90px; top: -45px; }
      .profile-info { margin-top: 60px; }
      .profile-tabs { gap: 1.2rem; }
      .profile-posts-grid { gap: 3px; }
    }
    @keyframes blink { 50% { opacity: 0.5; } }
    body.dark-mode { background: linear-gradient(135deg, #2D3748, #4A5568, #718096); }
    body.dark-mode .profile-container { background: rgba(45, 55, 72, 0.35); }
    body.dark-mode .profile-info, body.dark-mode .profile-stat-label { color: #DDD; }
    body.dark-mode .profile-tab.active { color: #9F7AEA; border-bottom-color: #9F7AEA; }
    .top-right-menu {
      position: absolute;
      top: 16px;
      right: 16px;
      z-index: 20;
    }
    .menu-button {
      background: transparent;
      border: none;
      color: #fff;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .menu-dropdown {
      display: none;
      position: absolute;
      top: 36px;
      right: 0;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 8px;
      box-shadow: 0 2px 12px rgba(76,81,191,0.13);
      min-width: 140px;
      overflow: hidden;
    }
    .menu-dropdown button {
      width: 100%;
      padding: 10px 16px;
      border: none;
      background: none;
      text-align: left;
      font-weight: 600;
      color: #4C51BF;
      cursor: pointer;
      transition: background 0.2s;
    }
    .menu-dropdown button:hover {
      background: #ED64A6;
      color: #fff;
    }
    .post-upload-form {
      background: rgba(255,255,255,0.95);
      border-radius: 18px;
      box-shadow: 0 2px 12px rgba(76,81,191,0.13);
      padding: 18px 16px;
      margin: 18px 0;
      display: none;
      position: relative;
      z-index: 10;
    }
    .post-upload-form label {
      font-size: 1rem;
      color: #4C51BF;
      font-weight: 600;
      margin-bottom: 4px;
      display: block;
    }
    .post-upload-form input[type="file"] {
      width: 100%;
      margin-bottom: 12px;
    }
    .post-upload-form button {
      padding: 0.5rem 1.5rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(45deg, #ED64A6, #4C51BF);
      color: #fff;
      transition: background 0.2s;
    }
    .post-upload-form .cancel-btn {
      background: #fff;
      color: #ED64A6;
      border: 1px solid #ED64A6;
    }
    .post-upload-form .cancel-btn:hover {
      background: #ED64A6;
      color: #fff;
    }
    .hidden-logout-btn {
      display: none;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-container">
      <a href="#" class="navbar-brand">
        <i class="fas fa-crown"></i>
        Socialite
      </a>

      <div class="navbar-menu">
        <a href="#" class="navbar-link">
          <i class="fas fa-home"></i>
          <span>Home</span>
        </a>
        <a href="#" class="navbar-link adaptive-active">
          <i class="fas fa-user"></i>
          <span>Profile</span>
        </a>
        <a href="#" class="navbar-link">
          <i class="fas fa-comments"></i>
          <span>Chat</span>
        </a>
        <a href="#" class="navbar-link">
          <i class="fas fa-video"></i>
          <span>Live</span>
        </a>
        <a href="#" class="navbar-link">
          <i class="fas fa-bell"></i>
          <span>Notifications</span>
          <span class="unread-badge">3</span>
        </a>
        <div class="navbar-bottom-section">
          <a href="#" class="navbar-link live-stream-btn">
            <i class="fas fa-video"></i>
            <span>Go Live</span>
          </a>
        </div>
      </div>

      <div class="navbar-actions">
        <button class="navbar-create-btn" title="Create">
          <i class="fas fa-plus"></i>
        </button>
        <div class="navbar-user">
          <img
            src="https://ui-avatars.com/api/?name=Test+User&background=ED64A6&color=fff&size=40"
            alt="Profile"
            class="navbar-avatar"
          />
          <div class="navbar-dropdown">
            <a href="#" class="dropdown-item">
              <i class="fas fa-user"></i> My Profile
            </a>
            <a href="#" class="dropdown-item">
              <i class="fas fa-cog"></i> Settings
            </a>
            <button class="dropdown-item">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </div>
        </div>
      </div>

      <button class="navbar-mobile-toggle" title="Menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>

    <div class="navbar-mobile-menu">
      <a href="#" class="mobile-menu-item">
        <i class="fas fa-home"></i> Home
      </a>
      <a href="#" class="mobile-menu-item">
        <i class="fas fa-user"></i> Profile
      </a>
      <a href="#" class="mobile-menu-item">
        <i class="fas fa-comments"></i> Chat
      </a>
      <a href="#" class="mobile-menu-item">
        <i class="fas fa-video"></i> Live
      </a>
      <a href="#" class="mobile-menu-item">
        <i class="fas fa-bell"></i> Notifications
      </a>
      <div class="mobile-menu-bottom-section">
        <a href="#" class="mobile-menu-item live-stream-btn">
          <i class="fas fa-video"></i> Go Live
        </a>
      </div>
      <button class="mobile-menu-item">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
    </div>
  </nav>

  <div class="profile-header-bg"></div>
  <div class="profile-container">
    <div class="top-right-menu">
      <button class="menu-button" id="menuButton" aria-label="Open menu"><i class="fas fa-ellipsis-v"></i></button>
      <div class="menu-dropdown" id="menuDropdown">
        <button id="menuEditProfileBtn">Edit Profile</button>
        <button id="menuLogoutBtn">Logout</button>
        <button id="menuPostBtn">New Post</button>
      </div>
    </div>
    <div class="profile-avatar" id="profileAvatar"><i class="fas fa-user"></i></div>
    <label for="uploadInput" class="upload-label" id="uploadLabel">
      <i class="fas fa-camera"></i> Change Photo
      <input type="file" id="uploadInput" class="upload-input" accept="image/*">
    </label>
    <div class="profile-info">
      <div class="profile-username" id="profileUsername">@username</div>
      <div class="profile-fullname" id="profileFullname">Full Name</div>
      <div class="profile-bio" id="profileBio">Bio goes here...</div>
    </div>
    <div class="profile-stats">
      <div class="profile-stat">
        <div class="profile-stat-number" id="followersCount">0</div>
        <div class="profile-stat-label">Followers</div>
      </div>
      <div class="profile-stat">
        <div class="profile-stat-number" id="followingCount">0</div>
        <div class="profile-stat-label">Following</div>
      </div>
      <div class="profile-stat">
        <div class="profile-stat-number" id="postsCount">0</div>
        <div class="profile-stat-label">Posts</div>
      </div>
      <button class="unfollow-btn" id="unfollowBtn3">Unfollow</button>
      <button class="edit-btn" id="editBtn2">Edit Profile</button>
      <button class="hide-post-btn" id="hidePostBtn">Hide Posts</button>
      <button class="unfollow-btn" id="unfollowBtn3">Unfollow</button>
      <button class="hide-post-btn" id="hidePostBtn">Hide Posts</button>
      <button class="hide-post-btn" id="hidePostBtn">Hide Posts</button>
      <button class="unfollow-btn show" id="unfollowBtn4">Unfollow</button>
    </div>
    <form class="edit-profile-form" id="editProfileForm">
      <label for="editUsername">Username</label>
      <input type="text" id="editUsername" required>
      <label for="editFullname">Full Name</label>
      <input type="text" id="editFullname" required>
      <label for="editEmail">Email</label>
      <input type="email" id="editEmail" required>
      <label for="editPhone">Phone Number</label>
      <input type="tel" id="editPhone">
      <label for="editBio">Bio</label>
      <textarea id="editBio" rows="2"></textarea>
      <label for="editPassword">Change Password</label>
      <input type="password" id="editPassword" placeholder="New Password">
      <div class="form-actions">
        <button type="submit">Save</button>
        <button type="button" class="cancel-btn" id="cancelEditBtn">Cancel</button>
      </div>
    </form>
    <form class="status-form" id="statusForm">
      <label for="statusText">What's on your mind?</label>
      <textarea id="statusText" rows="2" maxlength="200"></textarea>
      <div class="form-actions">
        <button type="submit">Post Status</button>
        <button type="button" class="cancel-btn" id="cancelStatusBtn">Cancel</button>
      </div>
    </form>
    <form class="post-upload-form" id="postUploadForm">
      <label for="postFileInput">Upload Video or Picture</label>
      <input type="file" id="postFileInput" accept="video/*,image/*" required>
      <div class="form-actions">
        <button type="submit">Post</button>
    <button class="logout-btn hidden-logout-btn" type="button" onclick="logout()" aria-label="Logout from Socialite">Logout</button>
      </div>
    <button type="button" class="logout-btn" onclick="logout()" aria-label="Logout from Socialite">Logout</button>
    <button class="logout-btn hidden-logout-btn" type="button" onclick="logout()" aria-label="Logout from Socialite">Logout</button>
    <div class="profile-tabs">
      <div class="profile-tab active" id="tabPosts"><i class="fas fa-th"></i></div>
      <div class="profile-tab" id="tabLikes"><i class="fas fa-heart"></i></div>
    </div>
    <div class="profile-posts-grid" id="profilePostsGrid">
      <!-- Posts will be loaded here -->
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage-compat.js"></script>
  <script src="common.js"></script>
  <script type="module">
    const firebaseConfig = {
      apiKey: "AIzaSyDdfcTtRD-HdvB_n_colrUWQI-FUZAiNh0",
      authDomain: "socialite-bae96.firebaseapp.com",
      projectId: "socialite-bae96",
      storageBucket: "socialite-bae96.appspot.com",
      messagingSenderId: "871563265567",
      appId: "1:871563265567:web:60b88ac1688f8af3ae372a",
      measurementId: "G-5LN8406TPX"
    };

    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    function getProfileUsername() {
      const params = new URLSearchParams(window.location.search);
      return params.get('user') || '';
    }

    async function getUserProfile(username) {
      try {
        const doc = await db.collection('users').doc(username).get();
        return doc.exists ? doc.data() : null;
      } catch {
        return null;
      }
    }

    async function getStats(username) {
      const followersSnap = await db.collection('followers').doc(username).collection('userFollowers').get();
      const followingSnap = await db.collection('following').doc(username).collection('userFollowing').get();
      const postsSnap = await db.collection('posts').where('owner', '==', username).get();
      return {
        followers: followersSnap.size,
        following: followingSnap.size,
        posts: postsSnap.size
      };
    }

    async function isFollowing(currentUid, profileUsername) {
      const doc = await db.collection('followers').doc(profileUsername).collection('userFollowers').doc(currentUid).get();
      return doc.exists;
    }

    async function follow(currentUid, profileUsername) {
      await db.collection('followers').doc(profileUsername).collection('userFollowers').doc(currentUid).set({ followedAt: firebase.firestore.FieldValue.serverTimestamp() });
      await db.collection('following').doc(currentUid).collection('userFollowing').doc(profileUsername).set({ followedAt: firebase.firestore.FieldValue.serverTimestamp() });
    }

    async function unfollow(currentUid, profileUsername) {
      await db.collection('followers').doc(profileUsername).collection('userFollowers').doc(currentUid).delete();
      await db.collection('following').doc(currentUid).collection('userFollowing').doc(profileUsername).delete();
    }

    const apiBaseUrl = 'http://localhost:4000/api'; // Adjust if backend runs on different host/port

    async function loadPosts(username, hidePosts = false) {
      const grid = document.getElementById('profilePostsGrid');
      if (hidePosts) {
        grid.innerHTML = '<div style="color:#fff;text-align:center;width:100%;grid-column:1/-1;">Posts are hidden.</div>';
        return;
      }
      grid.innerHTML = '';
      try {
        const response = await fetch(`${apiBaseUrl}/posts`);
        if (!response.ok) throw new Error('Failed to fetch posts');
        const posts = await response.json();
        if (posts.length === 0) {
          grid.innerHTML = '<div style="color:#fff;text-align:center;width:100%;grid-column:1/-1;">No posts yet.</div>';
          return;
        }
        posts.forEach(post => {
          if (post.user !== username) return; // Show only posts by profile user
          const div = document.createElement('div');
          div.className = 'profile-post-thumb';
          div.style.backgroundImage = post.thumbnailUrl ? `url('${post.thumbnailUrl}')` : "linear-gradient(135deg,#ED64A6,#4C51BF)";
          div.title = post.content || '';
          div.onclick = () => {
            alert('Post: ' + (post.content || 'No content'));
          };
          grid.appendChild(div);
        });
      } catch (err) {
        grid.innerHTML = `<div style="color:#fff;text-align:center;width:100%;grid-column:1/-1;">Error loading posts: ${err.message}</div>`;
      }
    }

    async function loadLikes(username) {
      const grid = document.getElementById('profilePostsGrid');
      grid.innerHTML = '';
      const likesSnap = await db.collection('users').doc(username).collection('likes').limit(30).get();
      if (likesSnap.empty) {
        grid.innerHTML = '<div style="color:#fff;text-align:center;width:100%;grid-column:1/-1;">No liked posts yet.</div>';
        return;
      }
      for (const doc of likesSnap.docs) {
        const postId = doc.id;
        const postDoc = await db.collection('posts').doc(postId).get();
        if (postDoc.exists) {
          const post = postDoc.data();
          const div = document.createElement('div');
          div.className = 'profile-post-thumb';
          div.style.backgroundImage = post.thumbnailUrl ? `url('${post.thumbnailUrl}')` : "linear-gradient(135deg,#ED64A6,#4C51BF)";
          div.title = post.caption || '';
          div.onclick = () => {
            alert('Post: ' + (post.caption || 'No caption'));
          };
          grid.appendChild(div);
        }
      }
    }

    function showUploadLabel(isOwnProfile) {
      document.getElementById('uploadLabel').style.display = isOwnProfile ? 'block' : 'none';
    }

    async function uploadProfilePicture(file, username) {
      if (!file) return;
      const storageRef = firebase.storage().ref();
      const profilePicRef = storageRef.child('profile_pictures/' + username + '_' + Date.now());
      await profilePicRef.put(file);
      const url = await profilePicRef.getDownloadURL();
      await firebase.firestore().collection('users').doc(username).update({ photoURL: url });
      document.getElementById('profileAvatar').innerHTML = `<img src="${url}" alt="avatar">`;
      alert('Profile picture updated!');
    }

    let hidePosts = false;

    async function setupProfile() {
      let profileUsername = getProfileUsername();

      auth.onAuthStateChanged(async (user) => {
        if (!profileUsername && user) {
          profileUsername = user.displayName || user.email || user.uid;
        }
        if (!profileUsername) {
          document.getElementById('profileUsername').textContent = "No user found";
          document.getElementById('profileFullname').textContent = "";
          return;
        }
        document.getElementById('profileUsername').textContent = '@' + profileUsername;
        const profile = await getUserProfile(profileUsername);
        if (profile) {
          document.getElementById('profileFullname').textContent = profile.fullname || '';
          document.getElementById('profileBio').textContent = profile.bio || 'No bio yet.';
          if (profile.photoURL) {
            document.getElementById('profileAvatar').innerHTML = `<img src="${profile.photoURL}" alt="avatar" style="width:100%;height:100%;border-radius:50%;">`;
          }
        } else if (user) {
          document.getElementById('profileUsername').textContent = '@' + (user.displayName || user.email || user.uid);
          document.getElementById('profileFullname').textContent = user.displayName || user.email || '';
        }
        const stats = await getStats(profileUsername);
        document.getElementById('followersCount').textContent = stats.followers;
        document.getElementById('followingCount').textContent = stats.following;
        document.getElementById('postsCount').textContent = stats.posts;

        document.getElementById('tabPosts').onclick = function() {
          document.getElementById('tabPosts').classList.add('active');
          document.getElementById('tabLikes').classList.remove('active');
          loadPosts(profileUsername, hidePosts, true);
        };
        document.getElementById('tabLikes').onclick = function() {
          document.getElementById('tabLikes').classList.add('active');
          document.getElementById('tabPosts').classList.remove('active');
          loadLikes(profileUsername);
        };
        loadPosts(profileUsername, hidePosts, true);

        if (user) {
          if (user.displayName === profileUsername || user.email === profileUsername) {
            // Hide the Edit Profile button
            document.getElementById('editBtn').style.display = 'none';
            document.getElementById('followBtn').style.display = 'none';
            document.getElementById('unfollowBtn').style.display = 'none';
            showUploadLabel(true);
          } else {
            document.getElementById('editBtn').style.display = 'none';
            showUploadLabel(false);
            const following = await isFollowing(user.uid, profileUsername);
            document.getElementById('followBtn').style.display = following ? 'none' : 'inline-block';
            document.getElementById('unfollowBtn').style.display = following ? 'inline-block' : 'none';

            document.getElementById('followBtn').onclick = async () => {
              await follow(user.uid, profileUsername);
              document.getElementById('followBtn').style.display = 'none';
              document.getElementById('unfollowBtn').style.display = 'inline-block';
              const stats = await getStats(profileUsername);
              document.getElementById('followersCount').textContent = stats.followers;
            };
            document.getElementById('unfollowBtn').onclick = async () => {
              await unfollow(user.uid, profileUsername);
              document.getElementById('followBtn').style.display = 'inline-block';
              document.getElementById('unfollowBtn').style.display = 'none';
              const stats = await getStats(profileUsername);
              document.getElementById('followersCount').textContent = stats.followers;
            };
          }
        }
      });
    }

    setupProfile();

    document.getElementById('uploadInput').addEventListener('change', async function() {
      const file = this.files[0];
      const username = getProfileUsername();
      if (file && username) {
        await uploadProfilePicture(file, username);
      }
    });

    // Menu button toggle
    const menuButton = document.getElementById('menuButton');
    const menuDropdown = document.getElementById('menuDropdown');
    menuButton.addEventListener('click', () => {
      menuDropdown.style.display = menuDropdown.style.display === 'block' ? 'none' : 'block';
    });

    // Close menu if clicked outside
    document.addEventListener('click', (e) => {
      if (!menuButton.contains(e.target) && !menuDropdown.contains(e.target)) {
        menuDropdown.style.display = 'none';
      }
    });

    // Menu buttons actions
    document.getElementById('menuEditProfileBtn').addEventListener('click', () => {
      document.getElementById('editProfileForm').style.display = 'block';
      document.getElementById('editUsername').value = document.getElementById('profileUsername').textContent.replace('@','');
      document.getElementById('editFullname').value = document.getElementById('profileFullname').textContent;
      document.getElementById('editBio').value = document.getElementById('profileBio').textContent;
      menuDropdown.style.display = 'none';
    });

    document.getElementById('menuLogoutBtn').addEventListener('click', () => {
      logout();
      menuDropdown.style.display = 'none';
    });

    document.getElementById('menuPostBtn').addEventListener('click', () => {
      document.getElementById('postUploadForm').style.display = 'block';
      menuDropdown.style.display = 'none';
    });

    document.getElementById('cancelPostBtn').addEventListener('click', () => {
      document.getElementById('postUploadForm').style.display = 'none';
    });

    document.getElementById('postUploadForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const file = document.getElementById('postFileInput').files[0];
      if (!file) return;
      const username = getProfileUsername();
      document.getElementById('loading').style.display = 'block';
      try {
        // Placeholder: In production, upload file to server or CDN and get URL
        const mediaUrl = URL.createObjectURL(file);
        const thumbnailUrl = mediaUrl; // Same for now
        const response = await fetch(`${apiBaseUrl}/posts`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token') || ''}`
          },
          body: JSON.stringify({
            content: '',
            mediaUrl,
            thumbnailUrl
          })
        });
        if (!response.ok) throw new Error('Failed to upload post');
        alert('Post uploaded!');
        document.getElementById('postUploadForm').style.display = 'none';
        document.getElementById('postFileInput').value = '';
        // Redirect to home.html to show the new post
        window.location.href = 'Home.html';
      } catch (err) {
        alert('Error uploading post: ' + err.message);
      }
      document.getElementById('loading').style.display = 'none';
    });

    document.getElementById('cancelEditBtn').onclick = function() {
      document.getElementById('editProfileForm').style.display = 'none';
    };

    document.getElementById('editProfileForm').onsubmit = async function(e) {
      e.preventDefault();
      const username = getProfileUsername();
      const newUsername = document.getElementById('editUsername').value.trim();
      const fullname = document.getElementById('editFullname').value.trim();
      const email = document.getElementById('editEmail').value.trim();
      const phone = document.getElementById('editPhone').value.trim();
      const bio = document.getElementById('editBio').value.trim();
      const password = document.getElementById('editPassword').value;
      document.getElementById('loading').style.display = 'block';
      try {
        await db.collection('users').doc(username).update({
          username: newUsername,
          fullname: fullname,
          email: email,
          phone: phone,
          bio: bio
        });
        if (password) {
          const user = auth.currentUser;
          await user.updatePassword(password);
        }
        if (email) {
          const user = auth.currentUser;
          await user.updateEmail(email);
        }
        document.getElementById('profileUsername').textContent = '@' + newUsername;
        document.getElementById('profileFullname').textContent = fullname;
        document.getElementById('profileBio').textContent = bio;
        alert('Profile updated!');
        document.getElementById('editProfileForm').style.display = 'none';
      } catch (err) {
        alert('Error updating profile: ' + err.message);
      }
      document.getElementById('loading').style.display = 'none';
    };

    document.getElementById('hidePostBtn').onclick = function() {
      hidePosts = !hidePosts;
      this.classList.toggle('active', hidePosts);
      this.textContent = hidePosts ? 'Show Posts' : 'Hide Posts';
      loadPosts(getProfileUsername(), hidePosts, true);
    };

    document.getElementById('editStatusBtn').onclick = function() {
      document.getElementById('statusForm').style.display = 'block';
    };
    document.getElementById('cancelStatusBtn').onclick = function() {
      document.getElementById('statusForm').style.display = 'none';
    };
    document.getElementById('statusForm').onsubmit = async function(e) {
      e.preventDefault();
      const username = getProfileUsername();
      const statusText = document.getElementById('statusText').value.trim();
      if (!statusText) return;
      document.getElementById('loading').style.display = 'block';
      try {
        await db.collection('status').add({
          owner: username,
          text: statusText,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });
        alert('Status posted!');
        document.getElementById('statusForm').style.display = 'none';
        document.getElementById('statusText').value = '';
      } catch (err) {
        alert('Error posting status: ' + err.message);
      }
      document.getElementById('loading').style.display = 'none';
    };

    function logout() {
      document.getElementById('loading').style.display = 'block';
      auth.signOut()
        .then(() => {
          document.getElementById('loading').style.display = 'none';
          window.location.replace('login.html');
        })
        .catch((error) => {
          alert(`Error: ${error.message}`);
          document.getElementById('loading').style.display = 'none';
        });
    }

    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
  </script>
</body>
</html>